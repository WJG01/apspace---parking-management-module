<ion-content>

  <ng-container *ngIf="plt.is('cordova'); else webVersion">
    <ion-grid class="main-grid ion-no-padding">
      <!-- Logo -->
      <ion-row header class="ion-align-items-start ion-align-items-stretch">
        <ion-col size="10" offset="1" size-md="6" offset-md="3" size-lg="4" offset-lg="4">
          <ion-img src="assets/img/login.png"></ion-img>
        </ion-col>
        <!-- Form & Welcome Message -->
        <ion-col size="10" offset="1" size-md="6" offset-md="3" size-lg="4" offset-lg="4">
          <form (ngSubmit)="login()" #loginForm="ngForm" class="ion-no-padding">
            <ion-row class="ion-align-items-start">
              <ion-col class="title-text-wrapper" size="12">
                <h1><strong>APSpace</strong></h1>
                <h2>Your digital university companion</h2>
              </ion-col>
            </ion-row>
            <!-- Input-fields -->
            <ion-row>
              <ion-col size="12">
                <div input-field>
                  <!-- Input-field-apkey -->
                  <ion-item class="ion-no-padding">
                    <ion-input type="text" [placeholder]="'APKey'" [(ngModel)]="apkey" (keyup.enter)="login()"
                      [autofocus]="true" [required]="true" name="apkey"></ion-input>
                  </ion-item>
                  <!-- Input-field-password -->
                  <ion-item class="ion-no-padding">
                    <ion-input class="ion-padding-start" [type]="showPassword ? 'text' : 'password'"
                      [placeholder]="'Password'" [(ngModel)]="password" clear-on-edit="false" (keyup.enter)="login()"
                      [required]="true" name="password">
                    </ion-input>
                    <ion-button type="button" clear slot="end" (click)="showPassword = !showPassword">
                      <ion-icon name="eye"></ion-icon>
                    </ion-button>
                  </ion-item>
                </div>
                <!-- Login Button -->
                <ion-col size="12" class="ion-no-padding">
                  <ion-button type="submit" class="login-button ion-no-margin"
                    [attr.color]="userDidLogin && userUnauthenticated ? 'danger' : userDidLogin && userAuthenticated? 'success': 'primary'"
                    [class.btn_center]="userDidLogin && (userUnauthenticated || loginProcessLoading || userAuthenticated)">
                    <span *ngIf="!userDidLogin">LOGIN</span>
                    <!-- LOADING -->
                    <ion-icon *ngIf="!userDidLogin" name="log-in" slot="end" size="large"></ion-icon>
                    <span *ngIf="userDidLogin && loginProcessLoading">
                      <loading-spinner></loading-spinner>
                    </span>
                    <!-- USER ENTER VALID CREDENTIALS -->
                    <span *ngIf="userDidLogin && userAuthenticated">
                      <ion-icon name="happy" slot="end" size="large"></ion-icon>
                    </span>
                    <!-- USER ENTER INVALID CREDENTIALS -->
                    <span *ngIf="userDidLogin && userUnauthenticated">
                      <ion-icon name="sad" slot="end" size="large"></ion-icon>
                    </span>
                  </ion-button>
                </ion-col>
                <!-- Useful Links -->
                <div description class="ion-text-center">
                  <ion-row>
                    <!-- Timetable Link -->
                    <ion-col size="12" class="ion-no-padding ion-margin-top">
                      <p class="ion-no-margin ion-no-padding">Check The Timetable? <a routerLink="/student-timetable"
                          routerDirection="forward">Students Timetable</a> </p>
                    </ion-col>
                    <!-- Graduate Verification Service Link -->
                    <ion-col size="12" class="ion-no-padding ion-margin-vertical">
                      <p class="ion-no-margin ion-no-padding">Verify Academic Qualification? <a
                          routerLink="/graduate-verification-service" routerDirection="forward">Graduate Verification
                          Service</a> </p>
                    </ion-col>
                    <!-- KB APKey Troubleshooting Link -->
                    <ion-col size="12" class="ion-no-padding ion-no-margin">
                      <p class="ion-no-margin ion-no-padding">Forgot Your Password? <a
                          (click)="openApkeyTroubleshooting()">APKey Troubleshooting</a>
                      </p>
                    </ion-col>
                  </ion-row>
                </div>
              </ion-col>
            </ion-row>
          </form>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ng-container>

  <ng-template #webVersion>
    <div class="main-container">
      <section class="header">
        <div class="container">
          <ion-grid class="ion-no-padding">
            <ion-row>
              <ion-col class="ion-no-padding" size="10" offset="1" offset-sm="" size-sm="5" size-md="4" size-lg="3">
                <ion-img class="logo" src="assets/img/apu.png"></ion-img>
              </ion-col>
            </ion-row>
          </ion-grid>
        </div>
      </section>

      <section class="menu">
        <div class="container">
          Hello this is the menu
        </div>
      </section>

      <section class="image-slider ion-padding-top ion-padding-bottom">
        <div class="container">
          <ion-grid class="ion-no-padding">
            <ion-row>
              <ion-col size="12" class="ion-padding">
                <ion-slides #sliderSlides pager="true" [options]="slideOpts">
                  <ng-container *ngIf="noticeBoardItems$ | async as noticeBoardItems">
                    <ion-slide *ngFor="let noticeBoardItem of noticeBoardItems">
                      <div class="picture">
                        <img [src]="'assets/img/banner_test.jpg'" alt="">
                      </div>
                    </ion-slide>
                  </ng-container>

                </ion-slides>
                <div class="swiper-button-next">
                  <ion-icon name="chevron-forward-outline" size="large" tappable (click)="nextSlide()">
                  </ion-icon>
                </div>
                <div class="swiper-button-prev">
                  <ion-icon name="chevron-back-outline" tappable (click)="prevSlide()" size="large"></ion-icon>
                </div>
              </ion-col>
            </ion-row>
          </ion-grid>
        </div>
      </section>

      <section class="main-items ion-padding-top ion-padding-bottom">
        <div class="container">
          <ion-grid class="ion-no-padding">
            <ion-row>
              <ion-col size="12" size-sm="6" size-lg="3" class="ion-padding">
                <div class='box course-materials'>
                  <div class='wave -one'></div>
                  <div class='wave -two'></div>
                  <div class='wave -three'></div>
                  <div class="icon">
                    <ion-icon name="book-sharp"></ion-icon>
                  </div>
                  <div class='title'>Course Materials</div>
                </div>
              </ion-col>
              <ion-col size="12" size-sm="6" size-lg="3" class="ion-padding">
                <div class='box intake-timetable'>
                  <div class='wave -one'></div>
                  <div class='wave -two'></div>
                  <div class='wave -three'></div>
                  <div class="icon">
                    <ion-icon name="calendar"></ion-icon>
                  </div>
                  <div class='title'>Intake Timetable</div>
                </div>
              </ion-col>
              <ion-col size="12" size-sm="6" size-lg="3" class="ion-padding">
                <div class='box holidays'>
                  <div class='wave -one'></div>
                  <div class='wave -two'></div>
                  <div class='wave -three'></div>
                  <div class="icon">
                    <ion-icon name="bed"></ion-icon>
                  </div>
                  <div class='title'>Holidays Calendar</div>
                </div>
              </ion-col>
              <ion-col size="12" size-sm="6" size-lg="3" class="ion-padding">
                <div class='box graduation'>
                  <div class='wave -one'></div>
                  <div class='wave -two'></div>
                  <div class='wave -three'></div>
                  <div class="icon">
                    <ion-icon name="school-sharp"></ion-icon>
                  </div>
                  <div class='title'>Graduation Ceremony</div>
                </div>
              </ion-col>
            </ion-row>
          </ion-grid>
        </div>
      </section>

      <section class="news">
        <div class="container">
          hello this is the news
        </div>
      </section>

      <section class="operating-hours">
        <div class="container">
          <ion-grid class="ion-no-padding" *ngIf="quixCompanies$ | async as quixCompanies">
            <ion-row>
              <ion-col size="12" size-sm="10" offset-sm="1" size-md="6" offset-md="3" size-lg="4" offset-lg="4"
                class="ion-padding">
                <ion-segment [(ngModel)]="selectedQuixSegment" mode="ios" class="operation-hours-companies">
                  <ion-segment-button *ngFor="let company of quixCompanies" [value]="company.company_id">
                    {{company.company_id}}
                  </ion-segment-button>
                </ion-segment>
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col size="12" class="ion-padding">
                <ion-slides [options]="operationHoursSlider">
                  <ng-container *ngIf="(quixCompanies | operationHoursFilter: selectedQuixSegment) as filteredCompany">
                    <ng-container *ngIf="filteredCompany; else noCompanies">
                      <ng-container *ngIf="filteredCompany.company_departments.length > 0; else noDepartments">
                        <ion-slide *ngFor="let department of filteredCompany.company_departments">
                          <div class="swiper-content">
                            <div class="top with-background">
                              <div class="calendar">
                                <ion-icon name="home"></ion-icon>
                              </div>
                              <div class="photo-btn">
                                <div class="text">{{filteredCompany.company_id}}
                                </div>
                              </div>
                            </div>
                            <div class="copy">
                              <h1>{{department.dept_name}}</h1>
                              <h3 *ngIf="department.dept_email">{{department.dept_email}}</h3>
                              <ion-grid>
                                <ion-row *ngIf="((department.shifts['Mon-Thu'].length === department.shifts['Fri'].length) 
                                        && department.shifts['Mon-Thu'].length > 0
                                        && (department.shifts['Mon-Thu'][0].start_time === department.shifts['Fri'][0].start_time)  
                                        && (department.shifts['Mon-Thu'][0].end_time === department.shifts['Fri'][0].end_time)
                                        && (department.shifts['Mon-Thu'][1]
                                        ? (department.shifts['Mon-Thu'][1].start_time === department.shifts['Fri'][1].start_time)  
                                        && (department.shifts['Mon-Thu'][1].end_time === department.shifts['Fri'][1].end_time)
                                        : true)); else showSeperate">
                                  <ion-col size-xs="12">
                                    <p class="ion-text-center colored-text">Monday-Friday</p>
                                    <div class="ion-text-center" *ngFor="let slot of department.shifts['Mon-Thu']">
                                      <p *ngIf="slot.start_time" class="timeTxt">
                                        {{ (slot.start_time | timeFormatter) }} - {{ (slot.end_time | timeFormatter) }}
                                      </p>
                                    </div>
                                  </ion-col>
                                </ion-row>
                                <ng-template #showSeperate>
                                  <ion-row class="ion-margin-top" *ngIf="department.shifts['Mon-Thu'].length > 0">
                                    <ion-col size-xs="12">
                                      <p class="ion-text-center colored-text">Monday-Thursday</p>
                                      <div class="ion-text-center" *ngFor="let slot of department.shifts['Mon-Thu']">
                                        <p *ngIf="slot.start_time" class="timeTxt">
                                          {{ (slot.start_time | timeFormatter) }} -
                                          {{ (slot.end_time | timeFormatter) }}
                                        </p>
                                      </div>
                                    </ion-col>
                                  </ion-row>
                                  <ion-row class="ion-margin-top" *ngIf="department.shifts['Fri'].length > 0">
                                    <ion-col size-xs="12">
                                      <p class="ion-text-center colored-text">Friday</p>
                                      <div class="ion-text-center" *ngFor="let slot of department.shifts['Fri']">
                                        <p *ngIf="slot.start_time" class="timeTxt">
                                          {{ (slot.start_time | timeFormatter) }} -
                                          {{ (slot.end_time | timeFormatter) }}
                                        </p>
                                      </div>
                                    </ion-col>
                                  </ion-row>
                                </ng-template>
                                <ion-row class="ion-margin-top" *ngIf="department.shifts['Sat'].length > 0">
                                  <ion-col size-xs="12">
                                    <p class="ion-text-center colored-text">Saturday</p>
                                    <div class="ion-text-center" *ngFor="let slot of department.shifts['Sat']">
                                      <p *ngIf="slot.start_time" class="timeTxt">
                                        {{ (slot.start_time | timeFormatter) }} - {{ (slot.end_time | timeFormatter) }}
                                      </p>
                                    </div>
                                  </ion-col>
                                </ion-row>
                              </ion-grid>
                              <div class="operation-hours-footer">
                                <div>
                                  <p>
                                    <ion-icon name="call-sharp"></ion-icon>
                                    {{department.dept_phone}}
                                  </p>
                                </div>
                              </div>
                            </div>
                          </div>
                        </ion-slide>
                      </ng-container>
                      <ng-template #noDepartments>
                        No Departments
                      </ng-template>
                    </ng-container>
                    <ng-template #noCompanies>
                      No Companies
                    </ng-template>
                  </ng-container>
                </ion-slides>
                <!-- <div class="swiper-button-next">
                  <ion-icon name="chevron-forward-outline" size="large" tappable (click)="nextSlide()">
                  </ion-icon>
                </div>
                <div class="swiper-button-prev">
                  <ion-icon name="chevron-back-outline" tappable (click)="prevSlide()" size="large"></ion-icon>
                </div> -->
              </ion-col>
            </ion-row>
          </ion-grid>
        </div>
      </section>

      <section class="stay-connected">
        <div class="container">
          hello this is the stay connected
        </div>
      </section>

      <section class="footer">
        <div class="container">
          <ion-grid class="ion-no-padding">
            <ion-row>
              <ion-col size="12" size-md="7" size-lg="6" class="ion-no-padding aps-margin-auto">
                <p class="ion-text-left small-text">
                  &copy; {{currentYear}} Asia Pacific University of Technology and Innovation (APU). All rights
                  reserved.
                </p>
              </ion-col>
              <ion-col size="12" size-md="5" size-lg="6" class="ion-no-padding ion-text-right">
                <ion-button size="small" fill="clear" color="light">
                  Privacy Policy
                </ion-button>
                <ion-button size="small" fill="clear" color="light">
                  Terms of Use
                </ion-button>
              </ion-col>
            </ion-row>
          </ion-grid>
        </div>
      </section>
    </div>
  </ng-template>
</ion-content>