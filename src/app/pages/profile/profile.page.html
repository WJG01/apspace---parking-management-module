<ion-header>
  <ion-toolbar mode="md">
    <ion-title>Profile</ion-title>
    <ion-buttons slot="start" [hidden]='comingFromTabs()'>
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-grid class="ion-no-padding">
    <ion-row>
      <ion-col size="12" size-md="10" offset-md="1" class="ion-no-padding">
        <ion-card>
          <ion-card-content class="ion-no-padding">
            <ion-grid>
              <ion-row>
                <ion-col size="4" offset="4" size-md="3" offset-md="" push-md="9">
                  <ng-template [ngIf]="photo$ | async">
                    <ion-img class="profile-photo" [src]="
                                              'data:image/jpg;base64,' +
                                              (photo$ | async)?.base64_photo
                                              " (ionError)="$event.target.src = 'assets/img/no_img.png'">
                    </ion-img>
                  </ng-template>
                </ion-col>
                <ion-col size="12" size-md="9" pull-md="3">
                  <ng-template let-profile [ngIf]="profile$ | async" [ngIfElse]="loadingProfile">
                    <ion-grid>
                      <ion-row>
                        <ion-col>
                          <h1 class="text-bold colored-text">PERSONAL INFORMATION</h1>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="6" size-md="3" class="margin-auto">
                          <h2>FULL NAME</h2>
                        </ion-col>
                        <ion-col size="6" offset-md="1" size-md="">
                          <h2>: {{ profile.NAME }}</h2>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="6" size-md="3" class="margin-auto">
                          <h2>STUDENT ID NO.</h2>
                        </ion-col>
                        <ion-col size="6" offset-md="1" size-md="">
                          <h2>: {{ profile.STUDENT_NUMBER }}</h2>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="6" size-md="3" class="margin-auto">
                          <h2>IC / PASSPORT NO.</h2>
                        </ion-col>
                        <ion-col size="6" offset-md="1" size-md="">
                          <h2>: 921008-14-5592</h2>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="6" size-md="3" class="margin-auto">
                          <h2>DATE OF BIRTH</h2>
                        </ion-col>
                        <ion-col size="6" offset-md="1" size-md="">
                          <h2>: 04-01-1995</h2>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="6" size-md="3" class="margin-auto">
                          <h2>GENDER</h2>
                        </ion-col>
                        <ion-col size="6" offset-md="1" size-md="">
                          <h2>: MALE</h2>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="6" size-md="3" class="margin-auto">
                          <h2>NATIONALITY</h2>
                        </ion-col>
                        <ion-col size="6" offset-md="1" size-md="">
                          <h2>: SYRIAN</h2>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="6" size-md="3" class="margin-auto">
                          <h2>COUNTRY OF ORIGIN</h2>
                        </ion-col>
                        <ion-col size="6" offset-md="1" size-md="">
                          <h2>: SYRIA</h2>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="6" size-md="3" class="margin-auto">
                          <h2>RACE</h2>
                        </ion-col>
                        <ion-col size="6" offset-md="1" size-md="">
                          <h2>: ARAB</h2>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="6" size-md="3" class="margin-auto">
                          <h2>RELIGION</h2>
                        </ion-col>
                        <ion-col size="6" offset-md="1" size-md="">
                          <h2>: MUSLIM <a button (click)="change('Religion', 'MUSLIM')">[edit]</a></h2>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col>
                          <h1 class="text-bold colored-text">CONTACT INFORMATION</h1>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="6" size-md="3" class="margin-auto">
                          <h2>MOBILE</h2>
                        </ion-col>
                        <ion-col size="6" offset-md="1" size-md="">
                          <h2>: 0182275610 <a button (click)="change('Mobile Number', '0182275610')">[edit]</a></h2>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="6" size-md="3" class="margin-auto">
                          <h2>E-MAIL</h2>
                        </ion-col>
                        <ion-col size="6" offset-md="1" size-md="">
                          <h2>: mohammad17@hotmail.com <a button
                              (click)="change('Email', 'mohammad17@hotmail.com')">[edit]</a></h2>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="6" size-md="3" class="margin-auto">
                          <h2>RESIDENTIAL ADDRESS</h2>
                        </ion-col>
                        <ion-col size="6" offset-md="1" size-md="">
                          <h2>: T1-8-3, SKYVILLA CONDO, PERSIARAN UTARA, D’ISLAND RESIDENCE, 47130
                            PUCHONG, SELANGOR <a button
                              (click)="change('Address', 'T1-8-3, SKYVILLA CONDO, PERSIARAN UTARA, D’ISLAND RESIDENCE, 47130 PUCHONG, SELANGOR')">[edit]</a>
                          </h2>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col>
                          <h1 class="text-bold colored-text">PARENT / GUARDIAN (1) INFORMATION</h1>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="6" size-md="3" class="margin-auto">
                          <h2>NAME</h2>
                        </ion-col>
                        <ion-col size="6" offset-md="1" size-md="">
                          <h2>: HATEM AL GHAYEB</h2>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="6" size-md="3" class="margin-auto">
                          <h2>RELATIONSHIP</h2>
                        </ion-col>
                        <ion-col size="6" offset-md="1" size-md="">
                          <h2>: FATHER</h2>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="6" size-md="3" class="margin-auto">
                          <h2>MOBILE</h2>
                        </ion-col>
                        <ion-col size="6" offset-md="1" size-md="">
                          <h2>: 0182275610</h2>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="6" size-md="3" class="margin-auto">
                          <h2>EMAIL</h2>
                        </ion-col>
                        <ion-col size="6" offset-md="1" size-md="">
                          <h2>: hatem@hotmail.com</h2>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col>
                          <h1 class="text-bold colored-text">PARENT / GUARDIAN (2) INFORMATION</h1>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="6" size-md="3" class="margin-auto">
                          <h2>NAME</h2>
                        </ion-col>
                        <ion-col size="6" offset-md="1" size-md="">
                          <h2>: HATEM AL GHAYEB</h2>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="6" size-md="3" class="margin-auto">
                          <h2>RELATIONSHIP</h2>
                        </ion-col>
                        <ion-col size="6" offset-md="1" size-md="">
                          <h2>: FATHER</h2>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="6" size-md="3" class="margin-auto">
                          <h2>MOBILE</h2>
                        </ion-col>
                        <ion-col size="6" offset-md="1" size-md="">
                          <h2>: 0182275610</h2>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="6" size-md="3" class="margin-auto">
                          <h2>EMAIL</h2>
                        </ion-col>
                        <ion-col size="6" offset-md="1" size-md="">
                          <h2>: hatem@hotmail.com</h2>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col>
                          <h1 class="text-bold colored-text">COURSE INFORMATION</h1>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="6" size-md="3" class="margin-auto">
                          <h2>COURSE</h2>
                        </ion-col>
                        <ion-col size="6" offset-md="1" size-md="">
                          <h2>: FOUNDATION (COMPUTING & TECHNOLOGY) </h2>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="6" size-md="3" class="margin-auto">
                          <h2>INTAKE DATE</h2>
                        </ion-col>
                        <ion-col size="6" offset-md="1" size-md="">
                          <h2>: MAY 2020</h2>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="6" size-md="3" class="margin-auto">
                          <h2>INTAKE CODE</h2>
                        </ion-col>
                        <ion-col size="6" offset-md="1" size-md="">
                          <h2>: UCFF2005CT</h2>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="6" size-md="3" class="margin-auto">
                          <h2>SCHOLARSHIP</h2>
                        </ion-col>
                        <ion-col size="6" offset-md="1" size-md="">
                          <h2>: MERIT SCHOLARSHIP - 50%</h2>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size="6" size-md="3" class="margin-auto">
                          <h2>FEES SCHEME</h2>
                        </ion-col>
                        <ion-col size="6" offset-md="1" size-md="">
                          <h2>: SEMESTER PAYMENT</h2>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col>
                          <h1 class="text-bold colored-text">DOCUMENTATION UPDATE</h1>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col>
                          <p>You are required to upload your IC Copy (Malaysian Students) / Passport Copy
                            (International Students) for us to update our records.</p>
                          <ion-input type="file" button></ion-input>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col>
                          <h1 class="text-bold danger-text">REQUEST UPDATE</h1>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col>
                          <p class="danger-text">** (TO ASK FOR THE TEXT HERE) If you want to update anything else</p>
                          <ion-button color="success" (click)="requestChange()">REQUEST UPDATE ON MY PROFILE</ion-button>
                        </ion-col>
                      </ion-row>
                    </ion-grid>
                  </ng-template>
                </ion-col>
              </ion-row>
            </ion-grid>
          </ion-card-content>
        </ion-card>
        <ion-card>
          <ion-card-header>
            <ion-card-title>
              <h1 class="colored-text">
                MEET YOUR E-COUNSELLOR!
              </h1>
            </ion-card-title>
          </ion-card-header>
          <ion-card-content class="ion-no-padding">
            <ion-grid>
              <ion-row>
                <ion-col size="12">
                  <h3>
                    Each student will be assigned to an E-Counsellor upon registration. Before your orientation, he/she
                    will
                    assist you in taking you through the Pre-Orientation processes. Stay in touch with your E-Counsellor
                    and
                    reach out to them if you need any assistance! Your E-Counsellor will be your mentor of guidance,
                    throughout your Orientation journey and beyond.
                  </h3>
                </ion-col>
              </ion-row>
              <ion-row>
                <ion-col size="4" offset="4" size-md="3" offset-md="" push-md="9">
                  <ng-template [ngIf]="photo$ | async">
                    <ion-img class="profile-photo" [src]="
                                              'data:image/jpg;base64,' +
                                              (photo$ | async)?.base64_photo
                                              " (ionError)="$event.target.src = 'assets/img/no_img.png'">
                    </ion-img>
                  </ng-template>
                </ion-col>
                <ion-col size="12" size-md="9" pull-md="3">
                  <ion-grid>
                    <ion-row>
                      <ion-col size="6" size-md="4">
                        <h2>E-COUNSELLOR’S NAME</h2>
                      </ion-col>
                      <ion-col size="6" offset-md="1" size-md="">
                        <h2>: MOHAMAD AL GHAYEB</h2>
                      </ion-col>
                    </ion-row>
                    <ion-row>
                      <ion-col size="6" size-md="4">
                        <h2>E-COUNSELLOR’S E-MAIL</h2>
                      </ion-col>
                      <ion-col size="6" offset-md="1" size-md="">
                        <h2>: mohamad.alghayeb@apu.edu.my</h2>
                      </ion-col>
                    </ion-row>
                    <ion-row>
                      <ion-col size="6" size-md="4">
                        <h2>E-COUNSELLOR’S WHATSAPP</h2>
                      </ion-col>
                      <ion-col size="6" offset-md="1" size-md="">
                        <h2>: +60 18-227 5610</h2>
                      </ion-col>
                    </ion-row>
                    <ion-row>
                      <ion-col size="12">
                        <p>Your E-Counsellor will normally be available from 10am to 6pm, Mondays to Fridays</p>
                      </ion-col>
                    </ion-row>
                    <ion-row>
                      <ion-col size="12">
                        <ion-button color="primary" expand="block">
                          CLICK HERE TO SEND A MESSAGE TO YOUR E-COUNSELLOR
                        </ion-button>
                      </ion-col>
                    </ion-row>
                  </ion-grid>
                </ion-col>
              </ion-row>
            </ion-grid>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
  <ion-grid class="ion-margin-top ion-no-padding">
    <ion-row>
      <ion-col class="ion-margin-top" size-xs="12" size-md="6" offset-md="3" size-lg="4" offset-lg="4">
        <!-- STUDENT PROFILE -->
        <ng-template [ngIf]="studentRole" [ngIfElse]="userIsStaff">
          <ion-card class="ion-no-margin ion-no-padding ion-text-center">

            <!-- STUDENT IMAGE -->
            <ng-template [ngIf]="photo$ | async" [ngIfElse]="loadingPicture">
              <div class="img-wrapper ion-margin-top ion-margin-bottom">
                <ion-img class="profile-photo" [src]="
                                        'data:image/jpg;base64,' +
                                        (photo$ | async)?.base64_photo
                                        " (ionError)="$event.target.src = 'assets/img/no_img.png'">
                </ion-img>
              </div>
            </ng-template>

            <!-- STUDENT PROFILE INFO -->
            <ng-template let-profile [ngIf]="profile$ | async" [ngIfElse]="loadingProfile">
              <ion-card-header>
                <ion-card-title>
                  <h3 class="responsive-h1">{{ profile.NAME }}</h3>
                </ion-card-title>
                <ion-card-subtitle>
                  <h5 class="responsive-h2">{{ profile.STUDENT_NUMBER }} | {{ profile.INTAKE }}</h5>
                </ion-card-subtitle>
              </ion-card-header>
              <ion-card-content>
                <div class="ion-margin-top">
                  <h4>Programme</h4>
                  <p>{{ profile.PROGRAMME }}</p>
                </div>
                <div class="ion-margin-top">
                  <ng-template [ngIf]="profile.MENTOR_SAMACCOUNTNAME" [ngIfElse]="mentorLost">
                    <h4>Mentor Name</h4>
                    <p (click)="openStaffDirectoryInfo(profile.MENTOR_SAMACCOUNTNAME)"
                      class="cursor-pointer colored-text">{{ profile.MENTOR_NAME }}</p>
                  </ng-template>
                  <ng-template #mentorLost>
                    <h4>Mentor Name</h4>
                    <p>{{ profile.MENTOR_NAME }}</p>
                  </ng-template>
                </div>
                <div class="ion-margin-top">
                  <ng-template [ngIf]="profile.PL_SAMACCOUNTNAME" [ngIfElse]="plLost">
                    <h4>Programme Leader</h4>
                    <p (click)="openStaffDirectoryInfo(profile.PL_SAMACCOUNTNAME)" class="colored-text cursor-pointer">
                      {{ profile.PL_NAME }}</p>
                  </ng-template>
                  <ng-template #plLost>
                    <h4>Programme Leader</h4>
                    <p>{{ profile.PL_NAME }}</p>
                  </ng-template>
                </div>
                <div class="ion-margin-top" *ngIf='!local'>
                  <ng-template let-visa [ngIf]='visa$ | async'>
                    <ng-template [ngIf]='visa[0].VISA_EXPIRY_DATE' [ngIfElse]='noVisa'>
                      <h4>Student Pass Expiry Date</h4>
                      <p>
                        {{ visa[0].VISA_EXPIRY_DATE | date: "EEE, d MMM y"  }}
                      </p>
                    </ng-template>
                    <ng-template #noVisa>
                      <h4>Student Pass Expiry Date</h4>
                      <ion-text color="danger">
                        <p>
                          Error while trying to get pass expiry date
                        </p>
                      </ion-text>
                    </ng-template>
                  </ng-template>
                </div>
                <div class="ion-margin-top">
                  <h4>Country</h4>
                  <p>{{ profile.COUNTRY }}</p>
                </div>
                <div class="ion-margin-top" *ngIf="intakeModified">
                  <h4>Timetable & Exam Schedule Intake</h4>
                  <p>{{timetableAndExamScheduleIntake}}</p>
                </div>
              </ion-card-content>
            </ng-template>
            <ion-footer *ngIf='!local'>
              <ion-list class="ion-no-margin">
                <ion-item-group>
                  <ion-item lines="none" class="cursor-pointer" [routerLink]="'/visa-status'">
                    <ion-avatar slot="start">
                      <img src="assets/img/visa-status.png">
                    </ion-avatar>
                    <ion-label>
                      <p class="secondary-txt-color">Submitted your application for visa renewal recently?</p>
                      <h2>Track Your Visa Application</h2>
                    </ion-label>
                  </ion-item>
                </ion-item-group>
              </ion-list>
            </ion-footer>
          </ion-card>
        </ng-template>

        <!-- STAFF PROFILE -->
        <ng-template #userIsStaff>
          <ion-card class="ion-no-margin ion-no-padding ion-text-center">
            <ng-container *ngIf="staffProfile$ | async as staffProfile; else loadingProfile">
              <!-- STAFF IMAGE -->
              <ion-img class="ion-margin-top profile-photo" [src]="staffProfile[0]?.PHOTO"
                (ionError)="$event.target.src = 'assets/img/no_img.png'"> </ion-img>
              <!-- STAFF PROFILE INFO -->
              <ion-card-header>
                <ion-card-title>
                  <h3 class="responsive-h1">
                    {{ staffProfile[0].FULLNAME }}
                  </h3>
                </ion-card-title>
                <ion-card-subtitle>
                  <h5 class="responsive-h2">{{ staffProfile[0].TITLE }}</h5>
                </ion-card-subtitle>
              </ion-card-header>
              <ion-card-content>
                <div class="ion-margin-top">
                  <h4>ID</h4>
                  <p>{{ staffProfile[0].ID }}</p>
                </div>
                <div class="ion-margin-top">
                  <h4>Current Job Type</h4>
                  <p>{{ staffProfile[0].CURRENT_JOB_TYPE }}</p>
                </div>
                <div class="ion-margin-top">
                  <h4>Department</h4>
                  <p>{{ staffProfile[0].DEPARTMENT }}</p>
                </div>

                <ng-template [ngIf]="staffProfile[0].DEPARTMENT2">
                  <div class="ion-margin-top">
                    <h4>Department 1</h4>
                    <p>{{ staffProfile[0].DEPARTMENT2 }}</p>
                  </div>
                </ng-template>

                <ng-template [ngIf]="staffProfile[0].DEPARTMENT3">
                  <div class="ion-margin-top">
                    <h4>Department 2</h4>
                    <p>{{ staffProfile[0].DEPARTMENT3 }}</p>
                  </div>
                </ng-template>

                <div class="ion-margin-top">
                  <h4>Nationality</h4>
                  <p>{{ staffProfile[0].NATIONALITY }}</p>
                </div>
              </ion-card-content>
            </ng-container>
          </ion-card>
        </ng-template>
        <ng-template #loadingPicture>
          <div class="ion-margin-top">
            <ion-skeleton-text animated style="width: 122px; line-height: 150px;margin: auto"></ion-skeleton-text>
          </div>
        </ng-template>
        <ng-template #loadingProfile>
          <ion-item lines="none" *ngFor="let s of skeltons">
            <ion-skeleton-text animated [style.width]="s + '%'" style="line-height: 30px; margin:auto;">
            </ion-skeleton-text>
          </ion-item>
        </ng-template>
      </ion-col>
    </ion-row>
  </ion-grid>

</ion-content>